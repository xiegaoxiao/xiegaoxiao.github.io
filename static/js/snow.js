var message={toast:function(e,t){var t=Number(isNaN(t)?2e3:t),n=document.createElement("div");n.classList.add("toast"),n.classList.add("show"),n.innerHTML=e,document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},t)}},Config={snow:["❄️","☃️","❄","※","❅","❆","❈","❉","❊","❋"],color:"#d9e2e7",speed:10,dom:document.getElementsByTagName("body")[0],interval:800,active:!1},storedSnowActive=localStorage.getItem("snowActive");if(Config.active="true"===storedSnowActive,!Config.dom)throw Error("请获取存在的DOM");var $canvas=document.createElement("div");function useStyle(e,t){for(var n in t)e.style[n]=t[n]}useStyle($canvas,{width:"100%",height:"100%",position:"fixed",top:0,left:0,pointerEvents:"none",zIndex:100});var snowInterval,matchDarkMode=window.matchMedia("(prefers-color-scheme: dark)");function handleColorSchemeChange(e){Config.color=e.matches?"rgb(255, 255, 255)":"rgb(149, 141, 186)"}function startSnowInterval(){return setInterval(function(){var e=document.createElement("div");e.innerText=Config.snow[Math.floor(Math.random()*Config.snow.length)],useStyle(e,{display:"inline-block",color:Config.color,fontSize:Math.floor(12*Math.random()+14)+"px",position:"absolute",top:0,left:Math.floor(100*Math.random())+"%",transition:"transform "+Config.speed+"s linear,opacity "+Config.speed+"s linear",transform:"translateY(-100%)",opacity:Math.random()+.3}),setTimeout(function(){useStyle(e,{transform:"translate(0, "+window.innerHeight+"px) rotate(480deg)",opacity:0}),e.addEventListener("transitionend",function(){e.remove()})},100),$canvas.appendChild(e)},Config.interval)}function toggleSnow(){Config.active?(clearInterval(snowInterval),$canvas.innerHTML="",Config.active=!1,message.toast("切换到晴天模式")):(snowInterval=startSnowInterval(),Config.active=!0,message.toast("切换到下雪模式")),localStorage.setItem("snowActive",Config.active)}matchDarkMode.addEventListener("change",handleColorSchemeChange),handleColorSchemeChange(matchDarkMode),Config.active&&(snowInterval=startSnowInterval()),Config.dom.appendChild($canvas);